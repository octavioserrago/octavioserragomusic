---
import { releases } from "../../data/releases.js";
import "../../styles/global.css";

export async function getStaticPaths() {
    return releases.map((release) => ({
        params: { slug: release.slug },
    }));
}

const { slug } = Astro.params;
const release = releases.find((r) => r.slug === slug);

if (!release) {
    throw new Error("Release not found");
}
---

<head>
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
</head>

<section
    class="px-2 pt-8 pb-12 md:pt-16 md:pb-20 md:min-h-screen md:flex md:items-center md:justify-center bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-700"
>
    <div
        class="w-full bg-white/10 border border-white/10 rounded-2xl shadow-2xl p-6 sm:p-10 text-white backdrop-blur-lg"
    >
        <img
            src={release.cover}
            alt={release.title}
            class="w-full max-w-[90%] mx-auto h-auto aspect-square object-contain rounded-xl mb-10 shadow-lg bg-neutral-900 border border-white/10"
        />

        <h1 class="text-6xl font-extrabold mb-4 tracking-tight text-center">
            {release.title}
        </h1>
        <p
            class="text-sm uppercase tracking-widest text-gray-400 mb-8 text-center"
        >
            {release.type}
        </p>

        <ul
            class="mb-10 text-left list-disc list-inside text-lg sm:text-xl text-gray-200 space-y-3 px-4 sm:px-6"
        >
            {release.tracks.map((track) => <li>{track}</li>)}
        </ul>

        <div class="flex justify-center gap-8 flex-wrap">
            {
                release.spotify && (
                    <a
                        href={release.spotify}
                        target="_blank"
                        rel="noopener"
                        class="group flex flex-col items-center hover:text-green-400 transition"
                    >
                        <span class="bg-neutral-800 p-6 rounded-full shadow-lg group-hover:bg-green-900 transition">
                            <i class="fab fa-spotify fa-4x" />
                        </span>
                        <span class="text-sm mt-3 opacity-80">Spotify</span>
                    </a>
                )
            }
            {
                release.apple && (
                    <a
                        href={release.apple}
                        target="_blank"
                        rel="noopener"
                        class="group flex flex-col items-center hover:text-pink-400 transition"
                    >
                        <span class="bg-neutral-800 p-6 rounded-full shadow-lg group-hover:bg-pink-900 transition">
                            <i class="fab fa-apple fa-4x" />
                        </span>
                        <span class="text-sm mt-3 opacity-80">Apple Music</span>
                    </a>
                )
            }
            {
                release.youtube && (
                    <a
                        href={release.youtube}
                        target="_blank"
                        rel="noopener"
                        class="group flex flex-col items-center hover:text-red-500 transition"
                    >
                        <span class="bg-neutral-800 p-6 rounded-full shadow-lg group-hover:bg-red-900 transition">
                            <i class="fab fa-youtube fa-4x" />
                        </span>
                        <span class="text-sm mt-3 opacity-80">YouTube</span>
                    </a>
                )
            }
            {
                release.amazon && (
                    <a
                        href={release.amazon}
                        target="_blank"
                        rel="noopener"
                        class="group flex flex-col items-center hover:text-yellow-400 transition"
                    >
                        <span class="bg-neutral-800 p-6 rounded-full shadow-lg group-hover:bg-yellow-900 transition">
                            <i class="fab fa-amazon fa-4x" />
                        </span>
                        <span class="text-sm mt-3 opacity-80">
                            Amazon Music
                        </span>
                    </a>
                )
            }
        </div>
    </div>
</section>
